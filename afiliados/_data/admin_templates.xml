<?xml version="1.0" encoding="utf-8"?>
<admin_templates>
    <template type="admin" title="hardmob_afiliados_store_list" version_id="1000000" version_string="1.0.0"><![CDATA[<xf:title>{{ phrase('hardmob_afiliados_stores_nav') }}</xf:title>

<div class="block">
    <div class="block-container">
        <div class="block-header">
            <div class="block-header-controls">
                <xf:button href="{{ link('affiliates/add') }}" class="button--primary" icon="add">
                    {{ phrase('hardmob_afiliados_add_store') }}
                </xf:button>
            </div>
        </div>
        
        <div class="block-body">
            <xf:if is="count($stores)">
                <div class="structItemContainer">
                    <xf:foreach loop="$stores" value="$store">
                        <div class="structItem">
                            <div class="structItem-cell structItem-cell--main">
                                <div class="structItem-title">
                                    <a href="{{ link('affiliates/edit', $store) }}">
                                        {{ $store.name }}
                                    </a>
                                </div>
                                <div class="structItem-minor">
                                    {{ $store.domain }}
                                </div>
                            </div>
                            
                            <div class="structItem-cell structItem-cell--meta">
                                <xf:if is="$store.status == 'active'">
                                    <span class="label label--green">{{ phrase('hardmob_afiliados_store_active') }}</span>
                                <xf:else />
                                    <span class="label label--red">{{ phrase('hardmob_afiliados_store_inactive') }}</span>
                                </xf:if>
                            </div>
                            
                            <div class="structItem-cell structItem-cell--action">
                                <xf:button href="{{ link('affiliates/edit', $store) }}" icon="edit" overlay="true">
                                    {{ phrase('edit') }}
                                </xf:button>
                                <xf:button href="{{ link('affiliates/delete', $store) }}" icon="delete" overlay="true">
                                    {{ phrase('delete') }}
                                </xf:button>
                            </div>
                        </div>
                    </xf:foreach>
                </div>
            <xf:else />
                <div class="blockMessage">
                    {{ phrase('no_items_to_display') }}
                </div>
            </xf:if>
        </div>
    </div>
</div>]]></template>

    <template type="admin" title="hardmob_afiliados_store_edit" version_id="1000000" version_string="1.0.0"><![CDATA[<xf:title>
    <xf:if is="$store.exists()">
        {{ phrase('hardmob_afiliados_edit_store') }}: {$store.name}
    <xf:else />
        {{ phrase('hardmob_afiliados_add_store') }}
    </xf:if>
</xf:title>

<xf:form action="{{ link('affiliates/save', $store) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="name" value="{$store.name}" label="{{ phrase('hardmob_afiliados_store_name') }}" required="true" />
            
            <xf:textboxrow name="domain" value="{$store.domain}" label="{{ phrase('hardmob_afiliados_store_domain') }}" 
                          hint="Exemplo: amazon.com.br (sem http:// ou https://)" required="true" />
            
            <xf:textboxrow name="affiliate_code" value="{$store.affiliate_code}" label="{{ phrase('hardmob_afiliados_affiliate_code') }}" required="true" />
            
            <xf:selectrow name="status" value="{$store.status}" label="{{ phrase('hardmob_afiliados_store_status') }}">
                <xf:option value="active">{{ phrase('hardmob_afiliados_store_active') }}</xf:option>
                <xf:option value="inactive">{{ phrase('hardmob_afiliados_store_inactive') }}</xf:option>
            </xf:selectrow>
        </div>
        
        <xf:submitrow sticky="true" icon="save" />
    </div>
</xf:form>]]></template>

    <template type="admin" title="hardmob_afiliados_stats" version_id="1000000" version_string="1.0.0"><![CDATA[<xf:title>{{ phrase('hardmob_afiliados_stats_nav') }}</xf:title>

<div class="block">
    <div class="block-container">
        <div class="block-header">
            <div class="block-header-controls">
                <xf:form action="{{ link('affiliates/tools/stats') }}" class="inputGroup">
                    <xf:select name="period" value="{$filters.period}" class="input">
                        <xf:option value="day">Hoje</xf:option>
                        <xf:option value="week">Esta Semana</xf:option>
                        <xf:option value="month" selected="true">Este Mês</xf:option>
                        <xf:option value="year">Este Ano</xf:option>
                    </xf:select>
                    
                    <xf:select name="store_id" value="{$filters.store_id}" class="input">
                        <xf:option value="">Todas as Lojas</xf:option>
                        <xf:foreach loop="$stores" value="$store">
                            <xf:option value="{$store.store_id}">{$store.name}</xf:option>
                        </xf:foreach>
                    </xf:select>
                    
                    <xf:button type="submit" class="button--primary">Filtrar</xf:button>
                </xf:form>
            </div>
        </div>
        
        <div class="block-body">
            <xf:if is="$stats.store_stats">
                <h3>Estatísticas por Loja</h3>
                <div class="structItemContainer">
                    <xf:foreach loop="$stats.store_stats" value="$stat">
                        <div class="structItem">
                            <div class="structItem-cell structItem-cell--main">
                                <div class="structItem-title">{$stat.store_name}</div>
                            </div>
                            <div class="structItem-cell">
                                <strong>{$stat.total_clicks}</strong> cliques
                            </div>
                            <div class="structItem-cell">
                                <strong>{$stat.unique_users}</strong> usuários únicos
                            </div>
                        </div>
                    </xf:foreach>
                </div>
                
                <hr />
                
                <h3>Top Produtos</h3>
                <div class="structItemContainer">
                    <xf:foreach loop="$stats.top_slugs" value="$slug" counter="$i">
                        <xf:if is="$i <= 10">
                            <div class="structItem">
                                <div class="structItem-cell structItem-cell--main">
                                    <div class="structItem-title">{$slug.slug}</div>
                                    <div class="structItem-minor">{$slug.store_name}</div>
                                </div>
                                <div class="structItem-cell">
                                    <strong>{$slug.click_count}</strong> cliques
                                </div>
                            </div>
                        </xf:if>
                    </xf:foreach>
                </div>
            <xf:else />
                <div class="blockMessage">
                    Nenhuma estatística disponível para o período selecionado.
                </div>
            </xf:if>
        </div>
    </div>
</div>]]></template>

    <template type="admin" title="hardmob_afiliados_tools" version_id="1000000" version_string="1.0.0"><![CDATA[<xf:title>{{ phrase('hardmob_afiliados_tools_nav') }}</xf:title>

<div class="block">
    <div class="block-container">
        <div class="block-header">
            <h3>Visão Geral do Sistema</h3>
        </div>
        
        <div class="block-body">
            <div class="structItemContainer">
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_total_stores') }}</div>
                    </div>
                    <div class="structItem-cell">
                        <strong>{$clickStats.total_stores}</strong>
                    </div>
                </div>
                
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_total_clicks') }}</div>
                    </div>
                    <div class="structItem-cell">
                        <strong>{$clickStats.total_clicks}</strong>
                    </div>
                </div>
                
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_clicks_today') }}</div>
                    </div>
                    <div class="structItem-cell">
                        <strong>{$clickStats.clicks_today}</strong>
                    </div>
                </div>
                
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_cache_entries') }}</div>
                    </div>
                    <div class="structItem-cell">
                        <strong>{$cacheStats.total_entries}</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-header">
            <h3>Ferramentas de Manutenção</h3>
        </div>
        
        <div class="block-body">
            <div class="structItemContainer">
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_clear_cache') }}</div>
                        <div class="structItem-minor">Remove todas as entradas do cache de links</div>
                    </div>
                    <div class="structItem-cell structItem-cell--action">
                        <xf:button href="{{ link('affiliates/tools/clear-cache') }}" class="button--primary" overlay="true">
                            Limpar Cache
                        </xf:button>
                    </div>
                </div>
                
                <div class="structItem">
                    <div class="structItem-cell structItem-cell--main">
                        <div class="structItem-title">{{ phrase('hardmob_afiliados_reset_all') }}</div>
                        <div class="structItem-minor">Remove todos os dados do addon (irreversível)</div>
                    </div>
                    <div class="structItem-cell structItem-cell--action">
                        <xf:button href="{{ link('affiliates/tools/reset-all') }}" class="button--alt" overlay="true">
                            Reset Completo
                        </xf:button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>]]></template>
</admin_templates>
